<!DOCTYPE html>

<html lang="en">
	<!--begin::Head-->
	<head><base href="../../"/>
		<title>SDM - BPR Mandiri Artha Abadi</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta property="og:locale" content="en_US" />
		<meta property="og:type" content="article" />
		<link rel="shortcut icon" href="#" />
		<!--begin::Fonts(mandatory for all pages)-->
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,400,500,600,700" />
		<!--end::Fonts-->
		<!--begin::Vendor Stylesheets(used for this page only)-->
		<link href="dist/assets/plugins/custom/datatables/datatables.bundle.css" rel="stylesheet" type="text/css" />
		<!--end::Vendor Stylesheets-->
		<!--begin::Global Stylesheets Bundle(mandatory for all pages)-->
		<link href="dist/assets/plugins/global/plugins.bundle.css" rel="stylesheet" type="text/css" />
		<link href="dist/assets/css/style.bundle.css" rel="stylesheet" type="text/css" />
		<!--end::Global Stylesheets Bundle-->
		<script>// Frame-busting to prevent site from being loaded within a frame without permission (click-jacking) if (window.top != window.self) { window.top.location.replace(window.self.location.href); }</script>


		<style>
			table{
				border-collapse: collapse;
				margin-left: -20px;			
			}	
					
			td button {
					width: auto;
					height: auto;
			}
			
			tbody{
				max-height: 350px;
				overflow: scroll;
				display: block;
			}

			img{
				height: 90px;				
			}

			.card {
				border: 1px solid black;
				/* padding-bottom: 3%; */
			}

			.row {
				/* padding-bottom: 15%; */
			}

		</style>

	</head>
	<body id="kt_app_body" data-kt-app-header-fixed="true" data-kt-app-header-fixed-mobile="true" data-kt-app-sidebar-enabled="true" data-kt-app-sidebar-fixed="true" data-kt-app-sidebar-hoverable="true" data-kt-app-sidebar-push-header="true" data-kt-app-sidebar-push-toolbar="true" data-kt-app-sidebar-push-footer="true" data-kt-app-toolbar-enabled="true" class="app-default">
				
		<div class="app-main flex-column flex-row-fluid" id="kt_app_main">
            <div class="d-flex flex-column flex-column-fluid">
                <div id="kt_app_content" class="app-content flex-column-fluid">
                    <div id="kt_app_content_container" class="app-container container-fluid">

                        <section id="intruksi" hidden>
                            <div class="row">
                                <div class="col-lg-12 col-xxl-4">
                                    <!--begin::Card-->
                                    <div class="card h-100">
                                        <!--begin::Card body-->
                                        <div class="card-body p-0">
                                            <!--begin::Heading-->
                                            <div class="fs-2hx fw-bold text-center" >Panduan Mengerjakan Soal</div>
                                            <div class="fs-4 fw-semibold text-black-400 mt-7">
                                                <p>
													Soal terdiri dari 90 pertanyaan,  pilihlah satu dari setiap pasangan tersebut yang Saudara anggap paling dekat menggambarkan diri saudara. Bila tidak satupun dari sebuah pasangan pernyataan yang cocok, pilihlah yang Saudara anggap paling mendekati.
                                                </p>
                                            </div>
                                            <div class="fs-4 fw-bold text-black-400 mt-7 text-center">
                                                <p>
                                                    <strong>
                                                    Waktu pengerjaan dihitung dari tombol MULAI diklik
                                                    </strong>
                                                </p>
                                            </div>
                                            <div class="text-center">
                                                <button class="btn btn-danger flex-center mulai" onclick="toggle(this)" id="mulai">Mulai</button>                                            
                                            </div>                                                                            
                                        </div>
                                    </div>
                                </div>                                           
                            </div>
                        </section>

                        <section id="kuis" hidden>
                        <div class="row gx-12 gx-xl-12"> 
							<div class="card-title">
								<div class="row">
									<div class="col-2">										
										<span class="text-sm-end number" id="number"></span>
									</div>
									<div class="col-10">
										<p class="fw-bold mb-1 text-center" style="font-size: 15px" id="timer">
											Time : 06:00
										</p>
									</div>								
								</div>														                                 						
							</div> 
							<hr>                                           
                            <div class="col-9">
                                <div class="card border">                                                                                                                                 
                                    <div class="card-body">
                                        <div class="tab-content">
											<div class="text-center">
												<img src="../../../dist/assets/media/products/1.png" id="image" alt="" class="rounded">
											</div>
											<h1 id="quiz" name="question"></h1>											
                                            <div class="tab-pane fade show active mt-10 options">                          
                                            
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
							<div class="col-3">
								<div class="card">
								<div class="table">
									<table class="table table-sm" id="buttonTable">
										<thead>
											<tr>
											  <th colspan="5" class="text-center"><h3>Navigasi</h3></th>
											</tr>
										  </thead>
										  <tbody></tbody>									
									  </table>
								</div>
								</div>
							</div>
							
							<div class="d-flex flex-lg-row flex-center d-grid mt-8 gap-2">
								<button class="btn btn-success btn-lg flex-shrink-0" name="previous" id="previous"  onclick="changeQuestion(-1)"><i class="fas fa-arrow-left"></i></button>
								<button class="btn btn-danger btn-lg flex-shrink-0">skip</button>
								<button class="btn btn-primary btn-lg flex-shrink-0" name="next" id="next" onclick="changeQuestion(1)"><i class="fas fa-arrow-right"></i></button>
							</div>                                 							
                        </div>
                        </section>


						<section>
							<div class="container">
								<div class="row">
									<div class="col-lg-8 col-md-6">
										<div class="card h-100">
											<div class="card-block">
												<div class="card-title">Hello World</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</section>


                    </div>
                    <!--end::Content container-->
                </div>
                <!--end::Content-->
            </div>
            <!--end::Content wrapper-->  
        </div>

	
		
		<script>var hostUrl = "assets/";</script>
		<script src="dist/assets/plugins/global/plugins.bundle.js"></script>
		<script src="dist/assets/js/scripts.bundle.js"></script>
		<script type="text/javascript" src="../../../dist/assets/js/custom/soal/papi.js"></script>
		<script type="text/javascript" src="../../../dist/assets/js/custom/soal/questions.js"></script>
		<script type="text/javascript" src="../../../dist/assets/js/custom/soal/tiu.js"></script>
		
		<script>	
			let currentQuestion = 0;
			const quizContainer = document.getElementById("quiz");
			const quizImage = document.getElementById("image");
  			const optionsContainer = document.querySelector(".options");
			const numberPage = document.getElementById("number");
			const pageButton = document.getElementsByClassName("number");
										
			function showQuestion() {
				const currentQ = tiu[currentQuestion];
				quizContainer.textContent = currentQ.question;
				quizImage.src = currentQ.image;
				numberPage.textContent = "Number " + currentQ.id + " of " + tiu.length;
				optionsContainer.innerHTML = '';

				currentQ.options.forEach((option, index) => {
				 // elemet html
				// const container = document.getElementById('dynamic-container');
				const outerDiv = document.createElement('div');
				outerDiv.classList.add('d-flex', 'flex-stack', 'position-relative', 'mt-3', 'options');
				const innerDiv = document.createElement('div');
				innerDiv.classList.add('d-flex', 'flex-stack', 'position-relative', 'mt-5');
				const lineDiv = document.createElement('div');
				lineDiv.classList.add('position-absolute', 'h-100', 'w-4px', 'bg-danger', 'rounded', 'top-0', 'start-0');
				const optionDiv = document.createElement('div');
				optionDiv.classList.add('form-check', 'ms-5', 'option-block');
				optionDiv.id = 'question-option';
				optionDiv.name = 'question-option';
				const radioInput = document.createElement('input');
				radioInput.type = 'radio';
				radioInput.classList.add('btn-check');
				radioInput.name = 'options-outlined';
				radioInput.id = 'success-outlined' + option;
				radioInput.autocomplete = 'off';
				const label = document.createElement('label');
				label.classList.add('btn', 'btn-outline-success', 'fw-bold', 'text-black-800', 'fs-5', 'text-hover-primary');
				label.htmlFor = 'success-outlined' + option;
				label.textContent = option;			
				// Gabungan elemen-elemen 
				// optionsContainer.appendChild(container);	

				optionsContainer.appendChild(outerDiv);
				outerDiv.appendChild(innerDiv);
				innerDiv.appendChild(lineDiv);
				innerDiv.appendChild(optionDiv);
				optionDiv.appendChild(radioInput);
				optionDiv.appendChild(label);
					
				});
			}


		// Fungsi untuk Next Code dan data
		function changeQuestion(direction) {
			currentQuestion += direction;

			// Check boundaries to prevent going below 0 or beyond the last question
			if (currentQuestion < 0) {
				currentQuestion = 0;
			} else if (currentQuestion >= tiu.length) {
				currentQuestion = tiu.length - 1;
			}

			// Save the current question to local storage
			localStorage.setItem('currentQuestion', currentQuestion);

			// Update the displayed question
			showQuestion();

			// Update parameter 'q' in the URL without reloading the page
			const newUrl = updateUrlParameter('q', currentQuestion);
			history.pushState(null, '', newUrl);
		}

		function updateUrlParameter(key, value) {
			const urlParams = new URLSearchParams(window.location.search);
			urlParams.set(key, value);
			return window.location.pathname + '?' + urlParams.toString();
		}

		document.addEventListener("DOMContentLoaded", function () {
			// Retrieve the current question from local storage
			const storedQuestion = localStorage.getItem('currentQuestion');

			// Set the current question to the stored value, or default to 0 if not present
			currentQuestion = storedQuestion ? parseInt(storedQuestion) : 0;

			// Show the question based on the retrieved or default value
			showQuestion();

			// Event handler for the "previous" button
			document.getElementById("previous").addEventListener("click", function () {
				changeQuestion(-1);
			});

			// Event handler for the "skip" button
			document.getElementById("skip").addEventListener("click", function () {
				// Add skip logic here if needed
			});

			// Event handler for the "next" button
			document.getElementById("next").addEventListener("click", function () {
				changeQuestion(1);
			});

			// Generate buttons
			generateButtons();
		});

		// End menyimpan data

			function generateButtons() {
			const tbody = document.querySelector('#buttonTable tbody');
			const columns = 5;

			for (let i = 0; i < tiu.length; i += columns) {
				const tr = document.createElement('tr');
				for (let j = 0; j < columns; j++) {
				const index = i + j;
				if (index < tiu.length) {
					const td = document.createElement('td');
					td.appendChild(createButton(tiu[index]));
					tr.appendChild(td);
				}
				}
				tbody.appendChild(tr);
			}
			}

			// Function to create a button
			function createButton(question) {
			const button = document.createElement('button');
			button.classList.add('btn', 'btn-primary');
			button.textContent = question.id;

			// Attach a click event listener to the button
			button.addEventListener('click', function() {
				handleButtonClick(question);
				showQuestion();
			});

			return button;
			}

			// Function to handle button click
			function handleButtonClick(question) {
			showQuestion(question);
			console.log('Button clicked for question:', question.id);
			console.log('Options:', question.options);
	
			}

			
			generateButtons();

  			showQuestion();

		</script>




	</body>
	<!--end::Body-->
</html>